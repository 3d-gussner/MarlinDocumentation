<!DOCTYPE html>
<!--
  Marlin Firmware Documentation
  Copyright (C) 2016 MarlinFirmware [https://github.com/MarlinFirmware/Marlin]

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.


  Generated by Jekyll v3.3.1
  Website version: 0.0.8-beta
--><html lang="en">
  <head>
    <!-- head -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.1.0 -->
<title>Configuring Marlin - Marlin 3D Printer Firmware</title>
<meta property="og:title" content="Configuring Marlin">
<meta name="description" content="Detailed description of all configuration options">
<meta property="og:description" content="Detailed description of all configuration options">
<link rel="canonical" href="http://marlinfw.org/docs/development/configuration.html">
<meta property="og:url" content="http://marlinfw.org/docs/development/configuration.html">
<meta property="og:site_name" content="Marlin 3D Printer Firmware">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2016-12-19T03:51:41+00:00">
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "BlogPosting",
"headline": "Configuring Marlin",
"datePublished": "2016-12-19T03:51:41+00:00",
"description": "Detailed description of all configuration options",
"publisher": {"@type": "Organization",
"logo": {"@type": "ImageObject",
"url": "http://marlinfw.org/assets/images/logo/marlin/small.png"}},
"url": "http://marlinfw.org/docs/development/configuration.html"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="icon" href="/assets/favicon.ico">
    <link rel="stylesheet" href="/assets/stylesheets/main.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="/assets/javascript/head.min.js"></script>
    <script type="text/javascript">
      /**
       * As Github pages do not support https for custom domains
       * this is the current best workaround for #18.
       */
      var domains  = ['marlinfw.org', 'localhost', '127.0.0.1' ];
      var pathname = location.pathname.replace(/^\/MarlinDocumentation/, '')
      if (domains.indexOf(window.location.hostname) == -1)
          window.top.location.href = 'http://marlinfw.org' + pathname;

      /**
       * Another ugly workaround trying to improve UX reported by #35
       */
       if (location.protocol != 'http:')
           location.href = 'http:' + window.location.href.substring(window.location.protocol.length); 

      /**
       * Improves overall speed by loading javascript and css resources in parallel
       * with the main page.
       */
      head.load(
          "/assets/stylesheets/font-awesome.min.css",

          "/assets/javascript/jquery-2.2.1.min.js",
          "/assets/javascript/jquery-ui.min.js",
          "/assets/javascript/bootstrap.min.js",
          "/assets/javascript/tocify.min.js",
          "/assets/javascript/custom.js",

          "/assets/javascript/sheetrock.min.js",
          "/assets/javascript/cookieconsent.min.js"
      );

      head.ready(function() {
        window.cookieconsent_options = {
          "message":"We uses cookies to ensure you get the best experience on our website",
          "dismiss": "Got it!", "learnMore": "More info", "link":"", "theme": "dark-bottom"
        };
      });
    </script>
    <!-- /head -->
  </head>
  <body role="document">
<!-- navbar -->
<nav class="navbar navbar-default navbar-fixed-top custom-no-margin">
  <div class="container">
    <div class="navbar-header">
      <a href="/" class="navbar-brand">
        <img src="/assets/images/logo/marlin/text-25.png" alt="Marlin">
      </a>
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>

    <div class="navbar-collapse collapse" id="navbar-main">
      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-getting-started">
          Getting Started <span class="caret"></span></a>

          <ul class="dropdown-menu">
            <li>
              <a href="/docs/basics/introduction.html">
              Introduction</a>
</li>

            <li class="divider">

            </li>
<li class="disabled">
              <a href="#">
              How to get</a>
</li>

            <li>
              <a href="/docs/development/configuration.html">
              Configuring Marlin</a>
</li>

            <li>
              <a href="/docs/basics/install.html">
              How to flash your board</a>
</li>

            <li class="divider">

            </li>
<li class="disabled">
            <a href="#">
            Reporting bugs</a>
</li>
          </ul>
        </li>

        <li>
          <a href="/meta/download/">
          Download</a>
</li>

        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-documentation">
          Documentation <span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            

            
              
              
                
                    <li class="dropdown-submenu">
                      <a href="#" class="dropdown-toggle" data-toggle="dropdown">Development</a>
                      <ul class="dropdown-menu">
                        <li><a href="/meta/development/">All documents</a></li>
                        <li class="divider">
                        
                        
                          
                            </li>
<li><a href="/docs/development/fonts.html">
                              
                                Adding new fonts
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/development/configuration.html">
                              
                                Configuring Marlin
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/development/getting_started_pull_requests.html">
                              
                                Contributing Code with Pull Requests
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/development/contributing.html">
                              
                                Contributing to Marlin
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/development/feature_request.html">
                              
                                Feature requests
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/development/boards.html">
                              
                                Supported hardware list
                              
                            </a></li>
                          
                        
                      </ul>
                    </li>
                  
                
                
                    <li class="dropdown-submenu">
                      <a href="#" class="dropdown-toggle" data-toggle="dropdown">G-Code</a>
                      <ul class="dropdown-menu">
                        <li><a href="/meta/gcode/">All documents</a></li>
                        <li class="divider">
                        
                        
                          
                            </li>
<li><a href="/docs/gcode/G00.html">
                              
                                G0: Linear Move
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/gcode/G02.html">
                              
                                G2: Controlled Arc Move
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/gcode/G04.html">
                              
                                G4: Dwell
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/gcode/G05.html">
                              
                                G5: Bézier cubic spline
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/gcode/G10.html">
                              
                                G10: Retract
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/gcode/G11.html">
                              
                                G11: Unretract
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/gcode/G12.html">
                              
                                G12: Clean the Nozzle
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/gcode/G20.html">
                              
                                G20: Inches
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/gcode/G21.html">
                              
                                G21: Millimeters
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/gcode/G27.html">
                              
                                G27: Park the nozzle
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/gcode/G28.html">
                              
                                G28: Move to Origin
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/gcode/G29-mbl.html">
                              
                                G29: Manual Bed Leveling
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/gcode/G29.html">
                              
                                G29: Automatic Bed Leveling
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/gcode/G30.html">
                              
                                G30: Single Z-Probe
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/gcode/G31.html">
                              
                                G31: Dock sled
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/gcode/G32.html">
                              
                                G32: Undock sled
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/gcode/G90.html">
                              
                                G90: Set to Absolute Positioning
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/gcode/G91.html">
                              
                                G91: Set to Relative Positioning
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/gcode/G92.html">
                              
                                G92: Set Position
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/gcode/M000.html">
                              
                                M0: Unconditional stop
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/gcode/M600.html">
                              
                                M600: Filament Change
                              
                            </a></li>
                          
                        
                      </ul>
                    </li>
                  
                
                
                    <li class="dropdown-submenu">
                      <a href="#" class="dropdown-toggle" data-toggle="dropdown">Marlin features</a>
                      <ul class="dropdown-menu">
                        <li><a href="/meta/features/">All documents</a></li>
                        <li class="divider">
                        
                        
                          
                            </li>
<li><a href="/docs/features/auto_bed_leveling.html">
                              
                                Automatic Bed Leveling
                              
                            </a></li>
                          
                        
                          
                            <li><a href="/docs/features/lin_advance.html">
                              
                                Linear Advance extrusion algorithm
                              
                            </a></li>
                          
                        
                      </ul>
                    </li>
                  
                
              

            <li class="divider">

            </li>
<li>
              <a href="/meta/needs-review/">
              Documentation needing review</a>
</li>
          </ul>
        </li>

        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-tools">
          Tools <span class="caret"></span></a>

          <ul class="dropdown-menu">
            <li><a href="/tools/u8glib/converter.html">
            C/C++ bitmap converter</a></li>

            <li class="divider">

            </li>
<li><a href="https://github.com/MarlinFirmware/Marlin/issues">
            Bugtracker</a></li>

            <li><a href="/docs/basics/reporting-bugs.html">
            Reporting bugs</a></li>

            <li class="divider">

            </li>
<li><a href="https://github.com/MarlinFirmware/Marlin/">
            Source code repository</a></li>
          </ul>
        </li>
      </ul>

      <ul class="nav navbar-nav navbar-right visible-lg-block">
        <li>
          <a href="https://github.com/MarlinFirmware/MarlinDocumentation/edit/master/_development/configuration.md" data-proofer-ignore>
          <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
          <span class="">Improve this page</span></a>
        </li>
      </ul>

    </div>
  </div>
</nav>
<!-- /navbar -->




    

    <!-- content -->
    <div class="container" role="main">
      <div class="row">
        <div class="col-lg-3 col-md-4 visible-lg-block visible-md-block custom-no-padding">
          <div class="custom-fixed-sidebar">
            <div id="toc"></div>
          </div>
        </div>
        <div class="col-lg-9 col-md-8 custom-bg-white">
          <div class="row">
            <div class="col-md-12 custom-article">
              <p class="text-right pull-right visible-lg-block hidden-print small custom-pt25">


  
                <a href="https://github.com/Sarf2k4" data-toggle="tooltip" data-placement="bottom" title="Visit Sarf2k4's profile on Github"><img class="avatar avatar-small" src="https://avatars2.githubusercontent.com/Sarf2k4?v=3&amp;s=30" alt="Sarf2k4" srcset="https://avatars2.githubusercontent.com/Sarf2k4?v=3&amp;s=30 1x, https://avatars2.githubusercontent.com/Sarf2k4?v=3&amp;s=60 2x, https://avatars2.githubusercontent.com/Sarf2k4?v=3&amp;s=90 3x, https://avatars2.githubusercontent.com/Sarf2k4?v=3&amp;s=120 4x" width="30" height="30" data-proofer-ignore="true"></a>
  
                <a href="https://github.com/paulusjacobus" data-toggle="tooltip" data-placement="bottom" title="Visit paulusjacobus's profile on Github"><img class="avatar avatar-small" src="https://avatars2.githubusercontent.com/paulusjacobus?v=3&amp;s=30" alt="paulusjacobus" srcset="https://avatars2.githubusercontent.com/paulusjacobus?v=3&amp;s=30 1x, https://avatars2.githubusercontent.com/paulusjacobus?v=3&amp;s=60 2x, https://avatars2.githubusercontent.com/paulusjacobus?v=3&amp;s=90 3x, https://avatars2.githubusercontent.com/paulusjacobus?v=3&amp;s=120 4x" width="30" height="30" data-proofer-ignore="true"></a>
  
                <a href="https://github.com/jbrazio" data-toggle="tooltip" data-placement="bottom" title="Visit jbrazio's profile on Github"><img class="avatar avatar-small" src="https://avatars2.githubusercontent.com/jbrazio?v=3&amp;s=30" alt="jbrazio" srcset="https://avatars2.githubusercontent.com/jbrazio?v=3&amp;s=30 1x, https://avatars2.githubusercontent.com/jbrazio?v=3&amp;s=60 2x, https://avatars2.githubusercontent.com/jbrazio?v=3&amp;s=90 3x, https://avatars2.githubusercontent.com/jbrazio?v=3&amp;s=120 4x" width="30" height="30" data-proofer-ignore="true"></a>
  
                <a href="https://github.com/landodragon141" data-toggle="tooltip" data-placement="bottom" title="Visit landodragon141's profile on Github"><img class="avatar avatar-small" src="https://avatars1.githubusercontent.com/landodragon141?v=3&amp;s=30" alt="landodragon141" srcset="https://avatars1.githubusercontent.com/landodragon141?v=3&amp;s=30 1x, https://avatars1.githubusercontent.com/landodragon141?v=3&amp;s=60 2x, https://avatars1.githubusercontent.com/landodragon141?v=3&amp;s=90 3x, https://avatars1.githubusercontent.com/landodragon141?v=3&amp;s=120 4x" width="30" height="30" data-proofer-ignore="true"></a>
  
                <a href="https://github.com/thinkyhead" data-toggle="tooltip" data-placement="bottom" title="Visit thinkyhead's profile on Github"><img class="avatar avatar-small" src="https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=30" alt="thinkyhead" srcset="https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=30 1x, https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=60 2x, https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=90 3x, https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=120 4x" width="30" height="30" data-proofer-ignore="true"></a>
  

              </p>
              <h1 class="custom-article-header">Configuring Marlin</h1>
<hr>


  

  
    <div class="container-fluid">  <div class="row alert alert-info custom-alert">    <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon">      <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i>    </div>    <div class="col-lg-11 col-md-10 custom-alert-text">      
<p>You’re reading a document which has been marked as <code class="highlighter-rouge">needs-review</code>, this means that the following information maybe outdated or no longer applies to the latest Marlin versions.</p>

    </div>  </div>
</div>
  


              <div class="container-fluid">  <div class="row alert alert-info custom-alert">    <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon">      <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i>    </div>    <div class="col-lg-11 col-md-10 custom-alert-text">      
<p>This document is based on Marlin 1.1.0 RC8.</p>
    </div>  </div>
</div>

<h1 id="introduction">Introduction</h1>

<p>Marlin is a huge C++ program composed of many files, but only two —<code class="highlighter-rouge">Configuration.h</code> and <code class="highlighter-rouge">Configuration_adv.h</code>— are used to configure Marlin for a specific machine. Just edit or replace them prior to building the binary (<code class="highlighter-rouge">.hex</code> file) or flashing the board. If you have these files from an older version of Marlin, you can usually just drop them in place to build the new version. (Marlin will give warnings about any deprecated options.) A variety of pre-built configurations are included in the example_configurations folder.</p>

<p>Marlin uses “compiler directives” for its configuration options. This method allows Marlin to include only the blocks of code that are needed for your specific setup. Settings are enabled, disabled, and assigned values using C preprocessor syntax like so:</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define THIS_IS_ENABLED // a comment about this switch
</span><span class="c1">//#define THIS_IS_DISABLED // a comment about this disabled switch
</span><span class="cp">#define OPTION_VALUE 22 // a comment about this parameter
</span></code></pre>
</div>

<h1 id="sources-of-documentation">Sources of Documentation</h1>

<p>While there are some good articles and YouTube videos on the subject of Marlin configuration and customization, they’re no substitute for comprehensive and up-to-date documentation. This site aims to do that, but there’s still a lot of work left to do. While we get it together, the most authoritative source on configuration is <strong>the configuration files themselves</strong>. They provide a good general description of each option. A <code class="highlighter-rouge">SanityCheck.h</code> file is also included to catch most common configuration mistakes.</p>

<h1 id="before-you-begin">Before You Begin</h1>

<p>If you’ve never configured and calibrated a RepRap machine before, here are some good resources:</p>

<ul>
  <li><a href="http://reprap.org/wiki/Calibration">Calibration</a></li>
  <li><a href="http://youtu.be/wAL9d7FgInk">Calibrating Steps-per-unit</a></li>
  <li><a href="http://calculator.josefprusa.cz">Prusa’s calculators</a></li>
  <li><a href="http://reprap.org/wiki/Triffid_Hunter%27s_Calibration_Guide">Triffid Hunter’s Calibration Guide</a></li>
  <li><a href="http://www.thingiverse.com/thing:5573">The Essential Calibration Set</a></li>
  <li><a href="https://sites.google.com/site/repraplogphase/calibration-of-your-reprap">Calibration of your RepRap</a></li>
  <li><a href="http://www.thingiverse.com/thing:298812">XY 20 mm Calibration Box</a></li>
  <li><a href="http://reprap.org/wiki/G-code">G-Code reference</a></li>
  <li><a href="https://github.com/cabbagecreek/Marlin3DprinterTool">Marlin3DprinterTool</a></li>
</ul>

<p>The settings in <code class="highlighter-rouge">Configuration.h</code> you’ll need to know include:</p>

<ul>
  <li>Printer style, such as Cartesian, Delta, CoreXY, or SCARA</li>
  <li>Driver board, such as RAMPS, RUMBA, Teensy, etc.</li>
  <li>Number of extruders</li>
  <li>Steps-per-mm for XYZ axes and extruders (can be tuned later)</li>
  <li>Endstop positions</li>
  <li>Thermistors and/or thermocouples</li>
  <li>Probes and probing settings</li>
  <li>LCD controller brand and model</li>
  <li>Add-ons and custom components</li>
</ul>

<h1 id="configurationh"><code class="highlighter-rouge">Configuration.h</code></h1>

<p>This document covers the <code class="highlighter-rouge">Configuration.h</code> file, following the order of settings as they appear. The order isn’t always logical, so “Search In Page” may be helpful. We’ve tried to keep descriptions brief and to the point. For more detailed information on various topics, please read the main articles and follow the links provided here in option descriptions.</p>

<h2 id="configuration-versioning">Configuration versioning</h2>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define CONFIGURATION_H_VERSION 010100
</span></code></pre>
</div>
<p>Marlin now checks for a configuration version and won’t compile without this setting. If you want to upgrade from an earlier version of Marlin, add this line to your old configuration file. During compilation, Marlin will throw errors explaining what needs to be changed.</p>

<h2 id="firmware-info">Firmware Info</h2>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define STRING_CONFIG_H_AUTHOR "(none, default config)"
#define SHOW_BOOTSCREEN
#define STRING_SPLASH_LINE1 SHORT_BUILD_VERSION // will be shown during bootup in line 1
#define STRING_SPLASH_LINE2 WEBSITE_URL         // will be shown during bootup in line 2
</span></code></pre>
</div>
<ul>
  <li>
<code class="highlighter-rouge">STRING_CONFIG_H_AUTHOR</code> is shown in the Marlin startup message, and is meant to identify the author (and optional variant) of the firmware. Use this setting as a way to uniquely identify all your custom configurations. The startup message is printed when connecting to host software, and whenever the board reboots.</li>
  <li>
<code class="highlighter-rouge">SHOW_BOOTSCREEN</code> enables the boot screen for LCD controllers.</li>
  <li>
<code class="highlighter-rouge">STRING_SPLASH_LINE1</code> and <code class="highlighter-rouge">STRING_SPLASH_LINE1</code> are shown on the boot screen.</li>
</ul>

<h2 id="hardware-info">Hardware Info</h2>

<h3 id="serial-port">Serial Port</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define SERIAL_PORT 0
</span></code></pre>
</div>
<p>The index of the on-board serial port that will be used for primary host communication. Change this if, for example, you need to connect a wireless adapter to non-default port pins. Serial port 0 will be used by the Arduino bootloader regardless of this setting.</p>

<h3 id="baud-rate">Baud Rate</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define BAUDRATE 115200
</span></code></pre>
</div>
<p>The serial communication speed of the printer should be as fast as it can manage without generating errors. In most cases 115200 gives a good balance between speed and stability. Start with 250000 and only go lower if “line number” and “checksum” errors start to appear. Note that some boards (e.g., a temperamental Sanguinololu clone based on the ATMEGA1284P) may not be able to handle a baudrate over 57600. Allowed values: 2400, 9600, 19200, 38400, 57600, 115200, 250000.</p>

<h3 id="bluetooth">Bluetooth</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define BLUETOOTH
</span></code></pre>
</div>
<p>Enable the Bluetooth serial interface. For boards based on the AT90USB.</p>

<h3 id="motherboard">Motherboard</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define MOTHERBOARD BOARD_RAMPS_14_EFB
</span></code></pre>
</div>
<p>The motherboard setting allows Marlin to allocate the correct pins to various functions and determine the available capabilities of the hardware.</p>

<p>Using <code class="highlighter-rouge">boards.h</code> as a reference, replace <code class="highlighter-rouge">BOARD_RAMPS_14_EFB</code> with your board’s ID. The <code class="highlighter-rouge">boards.h</code> file has the most up-to-date listing of supported boards, so check it first if you don’t see yours listed here.</p>

<table id="board_list" class="table table-condensed table-striped"></table>
<script type="text/javascript">
  head.ready("sheetrock.min.js", function() {
    // Load an entire worksheet.
    $('#board_list').sheetrock({
      url: "https://docs.google.com/spreadsheets/d/" +
        "1K4e1GaA4xuNfUGyIw57vxPGuUzQSv5wktTQBHdCVCKU#gid=525308416",
    });
  });
</script>

<div class="container-fluid">  <div class="row alert alert-info custom-alert">    <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon">      <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i>    </div>    <div class="col-lg-11 col-md-10 custom-alert-text">      
<p>For the Sanguino board with Arduino IDE 1.6.8 you’ll need to add Sanguino to the Board list. Select menu item <code class="highlighter-rouge">File</code> &gt; <code class="highlighter-rouge">Preferences</code> &gt; <code class="highlighter-rouge">Additional Boards Manager URLs</code> and add <a href="https://raw.githubusercontent.com/Lauszus/Sanguino/master/package_lauszus_sanguino_index.json">this source URL</a>. Then use <code class="highlighter-rouge">Tools &gt; Boards &gt; Boards Manager</code> to install Sanguino from the list. An internet connection is required. (Credit to <a href="http://dustsreprap.blogspot.my/2015/06/better-way-to-install-sanguino-in.html">Dust’s RepRap Blog</a>.)</p>
    </div>  </div>
</div>

<h3 id="custom-machine-name">Custom Machine Name</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//#define CUSTOM_MACHINE_NAME "3D Printer"
</span></code></pre>
</div>
<p>This is the name of your printer as displayed on the LCD and by <code class="highlighter-rouge">M115</code>. For example, if you set this to “My Delta” the LCD will display “My Delta ready” when the printer starts up.</p>

<h3 id="machine-uuid">Machine UUID</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//#define MACHINE_UUID "00000000-0000-0000-0000-000000000000"
</span></code></pre>
</div>
<p>A unique ID for your 3D printer. A suitable unique ID can be generated randomly at <a href="http://www.uuidgenerator.net/version4">uuidgenerator.net</a>. Some host programs and slicers may use this identifier to differentiate between specific machines on your network.</p>

<h2 id="extruder-info">Extruder Info</h2>

<h3 id="extruders">Extruders</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define EXTRUDERS 1
</span></code></pre>
</div>
<p>This value, from 1 to 4, defines how many extruders (E steppers) the printer has. By default Marlin will assume that there are separate nozzles, all moving together on a single carriage. If you have a single nozzle, a switching extruder, a mixing extruder, or dual X carriages, specify below.</p>

<p>This value should be set to the total number of E stepper motors on the machine, even if there’s only a single nozzle.</p>

<h3 id="distinct-e-factors">Distinct E Factors</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//#define DISTINCT_E_FACTORS
</span></code></pre>
</div>
<p>Enable <code class="highlighter-rouge">DISTINCT_E_FACTORS</code> if your extruders are not all mechanically identical. With this setting you can optionally specify different steps-per-mm, max feedrate, and max acceleration for each extruder.</p>

<h3 id="single-nozzle">Single Nozzle</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define SINGLENOZZLE
</span></code></pre>
</div>
<p>Enable <code class="highlighter-rouge">SINGLENOZZLE</code> if you have an E3D Cyclops or any other “multi-extruder” system that shares a single nozzle. In a single-nozzle setup, only one filament drive is engaged at a time, and each needs to retract before the next filament can be loaded and begin purging and extruding.</p>

<h3 id="switching-extruder">Switching Extruder</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//#define SWITCHING_EXTRUDER
</span><span class="cp">#if ENABLED(SWITCHING_EXTRUDER)
</span>  <span class="cp">#define SWITCHING_EXTRUDER_SERVO_NR 0
</span>  <span class="cp">#define SWITCHING_EXTRUDER_SERVO_ANGLES { 0, 90 } // Angles for E0, E1
</span>  <span class="c1">//#define HOTEND_OFFSET_Z {0.0, 0.0}
</span><span class="cp">#endif
</span></code></pre>
</div>
<p>A Switching Extruder is a dual extruder that uses a single stepper motor to drive two filaments, but only one at a time. The servo is used to switch the side of the extruder that will drive the filament. The E motor also reverses direction for the second filament. Set the servo sub-settings above according to your particular extruder’s setup instructions.</p>

<h3 id="mixing-extruder">Mixing Extruder</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cm">/**
 * "Mixing Extruder"
 *   - Adds a new code, M165, to set the current mix factors.
 *   - Extends the stepping routines to move multiple steppers in proportion to the mix.
 *   - Optional support for Repetier Host M163, M164, and virtual extruder.
 *   - This implementation supports only a single extruder.
 *   - Enable DIRECT_MIXING_IN_G1 for Pia Taubert's reference implementation
 */</span>
<span class="c1">//#define MIXING_EXTRUDER
</span><span class="cp">#if ENABLED(MIXING_EXTRUDER)
</span>  <span class="cp">#define MIXING_STEPPERS 2        // Number of steppers in your mixing extruder
</span>  <span class="cp">#define MIXING_VIRTUAL_TOOLS 16  // Use the Virtual Tool method with M163 and M164
</span>  <span class="c1">//#define DIRECT_MIXING_IN_G1    // Allow ABCDHI mix factors in G1 movement commands
</span><span class="cp">#endif
</span></code></pre>
</div>
<p>A Mixing Extruder uses two or more stepper motors to drive multiple filaments into a mixing chamber, with the mixed filaments extruded from a single nozzle. This option adds the ability to set a mixture, to save mixtures, and to recall mixtures using the <code class="highlighter-rouge">T</code> command. The extruder still uses a single E axis, while the current mixture is used to determine the proportion of each filament to use. An “experimental” <code class="highlighter-rouge">G1</code> direct mixing option is included.</p>

<h3 id="hotend-offsets">Hotend Offsets</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//#define HOTEND_OFFSET_X {0.0, 20.00} // (in mm) for each extruder, offset of the hotend on the X axis
//#define HOTEND_OFFSET_Y {0.0, 5.00}  // (in mm) for each extruder, offset of the hotend on the Y axis
</span></code></pre>
</div>
<p>Hotend offsets are needed if your extruder has more than one nozzle. These values specify the offset from the first nozzle to each nozzle. So the first element is always set to 0.0. The next element corresponds to the next nozzle, and so on. Add more offsets if you have 3 or more nozzles.</p>

<h2 id="power-supply">Power Supply</h2>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define POWER_SUPPLY 1
</span></code></pre>
</div>
<p>Use this option to specify the type of power supply you’re using. Marlin uses this setting to decide how to switch the power supply on and off. The options are None (0), ATX (1), or X-Box 360 (2). For a non-switchable power supply use 0. A common example of this is the power “brick” (like a big laptop power supply). For a PC power supply (ATX) or LED Constant-Voltage Power Supply select 1. These are the most commonly-used power supplies.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//#define PS_DEFAULT_OFF
</span></code></pre>
</div>
<p>Enable this if you don’t want the power supply to switch on when you turn on the printer. This is for printers that have dual powersupplies. For instance some setups have a separate powersupply for the heaters. In this situation you can save power by leaving the powersupply off until called for. If you don’t know what this is leave it.</p>

<h2 id="thermal-settings">Thermal Settings</h2>

<h3 id="temperature-sensors">Temperature Sensors</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define TEMP_SENSOR_0 5
#define TEMP_SENSOR_1 0
#define TEMP_SENSOR_2 0
#define TEMP_SENSOR_3 0
#define TEMP_SENSOR_BED 3
</span></code></pre>
</div>
<p>Temperature sensors are vital components in a 3D printer. Fast and accurate sensors ensure that the temperature will be well controlled, to keep plastic flowing smoothly and to prevent mishaps. Use these settings to specify the hotend and bed temperature sensors. Every 3D printer will have a hotend thermistor, and most will have a bed thermistor.</p>

<p>The listing above these options in <code class="highlighter-rouge">Configuration.h</code> contains all the thermistors and thermocouples that Marlin knows and supports. Try to match your brand and model with one of the sensors in the list. If no match is found, use a profile for a similar sensor of the same brand, or try “1” – the generic profile. Each profile is calibrated for a particular temperature sensor so it’s important to be as precise as possible.</p>

<div class="container-fluid">  <div class="row alert alert-warning custom-alert">    <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon">      <i class="fa fa-exclamation-circle fa-4x" aria-hidden="true"></i>    </div>    <div class="col-lg-11 col-md-10 custom-alert-text">      
<p>It is crucial to obtain accurate temperature measurements. As a last resort, use 100k thermistor for <code class="highlighter-rouge">TEMP_SENSOR</code> and <code class="highlighter-rouge">TEMP_SENSOR_BED</code> but be highly skeptical of the temperature accuracy.</p>
    </div>  </div>
</div>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">// Dummy thermistor constant temperature readings, for use with 998 and 999
</span><span class="cp">#define DUMMY_THERMISTOR_998_VALUE 25
#define DUMMY_THERMISTOR_999_VALUE 100
</span></code></pre>
</div>
<p>Marlin provides two dummy sensors for testing purposes. Set their constant temperature readings here.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//#define TEMP_SENSOR_1_AS_REDUNDANT
</span><span class="cp">#define MAX_REDUNDANT_TEMP_SENSOR_DIFF 10
</span></code></pre>
</div>
<p>Enable this option to use sensor 1 as a redundant sensor for sensor 0. This is an advanced way to protect against temp sensor failure. If the temperature difference between sensors exceeds <code class="highlighter-rouge">MAX_REDUNDANT_TEMP_SENSOR_DIFF</code> Marlin will abort the print and disable the heater.</p>

<h3 id="temperature-stability">Temperature Stability</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define TEMP_RESIDENCY_TIME 10  // (seconds)
#define TEMP_HYSTERESIS 3       // (degC) range of +/- temperatures considered "close" to the target one
#define TEMP_WINDOW 1           // (degC) Window around target to start the residency timer x degC early.
</span></code></pre>
</div>
<p>Extruders must maintain a stable temperature for <code class="highlighter-rouge">TEMP_RESIDENCY_TIME</code> before <code class="highlighter-rouge">M109</code> will return success and start the print. Tune what “stable” means using <code class="highlighter-rouge">TEMP_HYSTERESIS</code> and <code class="highlighter-rouge">TEMP_WINDOW</code>.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define TEMP_BED_RESIDENCY_TIME 10  // (seconds)
#define TEMP_BED_HYSTERESIS 3       // (degC) range of +/- temperatures considered "close" to the target one
#define TEMP_BED_WINDOW 1           // (degC) Window around target to start the residency timer x degC early.
</span></code></pre>
</div>
<p>Bed must maintain a stable temperature for <code class="highlighter-rouge">TEMP_BED_RESIDENCY_TIME</code> before <code class="highlighter-rouge">M109</code> will return success and start the print. Tune what “stable” means using <code class="highlighter-rouge">TEMP_BED_HYSTERESIS</code> and <code class="highlighter-rouge">TEMP_BED_WINDOW</code>.</p>

<h3 id="temperature-ranges">Temperature Ranges</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define HEATER_0_MINTEMP 5
#define HEATER_1_MINTEMP 5
#define HEATER_2_MINTEMP 5
#define HEATER_3_MINTEMP 5
#define BED_MINTEMP 5
</span></code></pre>
</div>
<p>These parameters help prevent the printer from overheating and catching fire. Temperature sensors report abnormally low values when they fail or become disconnected. Set these to the lowest value (in degrees C) that the machine is likely to experience. Indoor temperatures range from 10C-40C, but a value of 0 might be appropriate for an unheated workshop.</p>

<p>If any sensor goes below the minimum temperature set here, Marlin will <strong>shut down the printer</strong> with a “MINTEMP” error.</p>

<div class="container-fluid">  <div class="row alert alert-primary custom-alert">    <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon">      <i class="fa fa-comment fa-4x" aria-hidden="true"></i>    </div>    <div class="col-lg-11 col-md-10 custom-alert-text">      
<p><code class="highlighter-rouge">Err: MINTEMP</code>: This error means your thermistor has disconnected or become an open circuit. (Or the machine is just very cold.)</p>
    </div>  </div>
</div>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define HEATER_0_MAXTEMP 285
#define HEATER_1_MAXTEMP 275
#define HEATER_2_MAXTEMP 275
#define HEATER_3_MAXTEMP 275
#define BED_MAXTEMP 130
</span></code></pre>
</div>

<p>Maximum temperature for each temperature sensor. If Marlin reads a temperature above these values, it will immediately shut down for safety reasons. For the E3D V6 hotend, many use 285 as a maximum value.</p>

<div class="container-fluid">  <div class="row alert alert-primary custom-alert">    <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon">      <i class="fa fa-comment fa-4x" aria-hidden="true"></i>    </div>    <div class="col-lg-11 col-md-10 custom-alert-text">      
<p><code class="highlighter-rouge">Err: MAXTEMP</code>: This error usually means that the temperature sensor wires are shorted together. It may also indicate an issue with the heater MOSFET or relay that is causing it to stay on.</p>
    </div>  </div>
</div>
<hr>

<h3 id="pid">PID</h3>

<p>Marlin uses PID (Proportional, Integral, Derivative) control (<a href="https://en.wikipedia.org/wiki/PID_controller">Wikipedia</a>) to stabilize the dynamic heating system for the hotends and bed. When PID values are set correctly, heaters reach their target temperatures faster, maintain temperature better, and experience less wear over time.</p>

<p>Most vitally, correct PID settings will prevent excessive overshoot, which is a safety hazard. During PID calibration, use the highest target temperature you intend to use (where overshoots are more critical).</p>

<p>See the <a href="http://reprap.org/wiki/PID_Tuning">PID Tuning</a> topic on the RepRap wiki for detailed instructions on <code class="highlighter-rouge">M303</code> auto-tuning. The PID settings should be tuned whenever changing a hotend, temperature sensor, heating element, board, power supply voltage (12v/24v), or anything else related to the high-voltage circuitry.</p>

<hr>

<h4 id="pid-hotend">PID Hotend</h4>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define PIDTEMP
#define BANG_MAX 255     // limits current to nozzle while in bang-bang mode; 255=full current
#define PID_MAX BANG_MAX // limits current to nozzle while PID is active (see PID_FUNCTIONAL_RANGE below); 255=full current
</span></code></pre>
</div>

<p>Disable <strong>PIDTEMP</strong> if you want to run your heater in bang-bang mode. Bang_bang is a pure binary mode where the heater is either full on or full off. PID control is PWM and in most cases is superior in it’s ability to maintain a stable temperature.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#if ENABLED(PIDTEMP)
</span>  <span class="c1">//#define PID_AUTOTUNE_MENU 
</span>  <span class="c1">//#define PID_DEBUG         
</span>  <span class="c1">//#define PID_OPENLOOP 1    
</span>  <span class="c1">//#define SLOW_PWM_HEATERS  
</span>  <span class="c1">//#define PID_PARAMS_PER_HOTEND
</span>  <span class="cp">#define PID_FUNCTIONAL_RANGE 10                                  
</span>  <span class="cp">#define PID_INTEGRAL_DRIVE_MAX PID_MAX
</span>  <span class="cp">#define K1 0.95
</span></code></pre>
</div>

<p>Enable <strong>PID_AUTOTUNE_MENU</strong> to add an option on the LCD to run an Autotune cycle and automatically apply the result. 
Enable <strong>PID_PARAMS_PER_HOTEND</strong> if you have more than one extruder and they are different models.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code>  <span class="c1">// Ultimaker
</span>  <span class="cp">#define  DEFAULT_Kp 22.2
</span>  <span class="cp">#define  DEFAULT_Ki 1.08
</span>  <span class="cp">#define  DEFAULT_Kd 114
</span>
  <span class="c1">// MakerGear
</span>  <span class="c1">//#define  DEFAULT_Kp 7.0
</span>  <span class="c1">//#define  DEFAULT_Ki 0.1
</span>  <span class="c1">//#define  DEFAULT_Kd 12
</span>
  <span class="c1">// Mendel Parts V9 on 12V
</span>  <span class="c1">//#define  DEFAULT_Kp 63.0
</span>  <span class="c1">//#define  DEFAULT_Ki 2.25
</span>  <span class="c1">//#define  DEFAULT_Kd 440
</span></code></pre>
</div>

<p>You can use any of these pre-configured sets by disabling the current active set and enabling the desired set.</p>

<div class="container-fluid">  <div class="row alert alert-info custom-alert">    <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon">      <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i>    </div>    <div class="col-lg-11 col-md-10 custom-alert-text">      
<p><code class="highlighter-rouge">M301</code> sets up Hotend PID and is also accessible through the LCD
<code class="highlighter-rouge">M304</code> sets up bed PID.</p>
    </div>  </div>
</div>

<hr>

<h4 id="pid-bed">PID Bed</h4>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//#define PIDTEMPBED
</span></code></pre>
</div>

<p>Enable <strong>PIDTEMPBED</strong> if you want to use PID for your bed heater. It uses the same frequency PWM as the extruder. If your PID_dT is the default, and correct for your hardware/configuration, that means 7.689Hz, which is fine for driving a square wave into a resistive load and does not significantly impact you FET heating. This also works fine on a Fotek SSR-10DA Solid State Relay into a 250W heater. If your configuration is significantly different than this and you don’t understand the issues involved, you probably shouldn’t use bed PID until someone else verifies your hardware works. If this is enabled, find your own PID constants below.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define MAX_BED_POWER 255
</span></code></pre>
</div>

<p>This sets the max power delivered to the bed, and replaces the HEATER_BED_DUTY_CYCLE_DIVIDER option. All forms of bed control obey this (PID, bang-bang, bang-bang with hysteresis) setting this to anything other than 255 enables a form of PWM to the bed, so you shouldn’t use it unless you are OK with PWM on your bed. (see the comment above on enabling PIDTEMPBED)</p>

<hr>

<h3 id="safety">Safety</h3>

<hr>

<h4 id="cold-extrusion-prevention">Cold extrusion prevention</h4>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define EXTRUDE_MINTEMP 170
</span></code></pre>
</div>

<p>This setting prevents the extruder motor from moving if the hotend temperature is less than the chosen value. This is to avoid “Cold Extruding” which can damage your printer in several ways. For testing or calibration purposes this setting can be overridden with M302.</p>

<div class="container-fluid">  <div class="row alert alert-primary custom-alert">    <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon">      <i class="fa fa-comment fa-4x" aria-hidden="true"></i>    </div>    <div class="col-lg-11 col-md-10 custom-alert-text">      
<p>Be EXTREMELY careful if you chose to override this. We will probably laugh at you if you ignore our advice and damage your printer!</p>
    </div>  </div>
</div>

<hr>

<h4 id="thermal-runaway-protection">Thermal Runaway Protection</h4>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define THERMAL_PROTECTION_HOTENDS // Enable thermal protection for all extruders
#define THERMAL_PROTECTION_BED     // Enable thermal protection for the heated bed
</span></code></pre>
</div>

<p>This one is a cool safety feature to enable. If the current temperature drops below the one Marlin is maintaining, Marlin applies heat and sets a timer. If the time limit is exceeded before restoring the temperature, Marlin shuts down the printer.</p>

<p>The idea here is to detect if a temperature sensor gets loose and no longer is in good thermal contact with the hotend or heat-bed. For example, if it suddenly comes loose in the hotend during printing, with a target temperature of say 230’c, the temperature sensor reading on Marlin might drop to, say, 170’c. Marlin thinks the hotend temperature is low and needed to be powered. Without this protection, if the temperature sensor reading failed to reach the target, the hotend would heat indefinitely, getting red-hot and possibly setting fire to things - all due to misreading of the temperature from the loose temperature sensor.</p>

<p>How it works: with a target temperature at 190’c, and after reaching the target 190’c, should the reading drop below the target Marlin will power the hotend and start the timer countdown. If the countdown ends with the heating element still fully powered, Marlin will shut down the print. The same goes for the heated bed.</p>

<p>The config of these parameters can be found in “configuration_adv.h” file, but you shouldn’t need to edit them.</p>

<div class="panel panel-info">
<div class="panel-heading">
<i class="fa fa-info-circle pull-left" aria-hidden="true"></i><h4 class="panel-title">Information</h4>
</div>
<div class="panel-body">
<p>
</p>
<p>In the case of repeated false thermal runaways that are NOT the result of a loose temperature sensor, you can increase the watch period. This could happen for instance if a part fan started blowing on the bed thermistor.
<code class="highlighter-rouge">cpp
For example:
#define WATCH_TEMP_PERIOD 20   // Seconds
#define WATCH_TEMP_INCREASE 2  // Degrees Celsius
</code></p>
</div>
</div>

<hr>

<h2 id="mechanical">Mechanical</h2>

<h3 id="special-machines">Special Machines</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">// Uncomment one of these options to enable CoreXY, CoreXZ, or CoreYZ kinematics
//#define COREXY
//#define COREXZ
//#define COREYZ
</span></code></pre>
</div>

<p>These settings are for special types of machine configurations which require different algorithms to move around. They take advantage of a unique mechanical property called kinematics constraints. Kinematics use multiple connected links to produce a motion. Hinges, slides, and ball joints are all commonly used for kinematic links.  A very common example of kinematic constrained motion is found in the piston driven automobile engine. A series of linear sliding links (piston and rod) are connected with rotating joints onto a cylindrical drive shaft. The motion of each piston effects the others because they are kinematically constrained. The most common types of kinematic machines with regards to 3d printers are: SCARA, CORE XY (and variants), Delta (usually linear delta), and Polar. They each consist of unique drive architectures that employ kinematic links and constraints to produce motion in the standard XYZ system. While Delta and CORE XY architechtures are gaining popularity the majority of printers use standard Cartesian (XYZ) drives.</p>

<p>For Delta or SCARA printers copy the coresponding files from the “Example Configurations” folder.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">// Enable this option for Toshiba steppers
//#define CONFIG_STEPPERS_TOSHIBA
</span></code></pre>
</div>

<p>For standard NEMA steppers, leave CONFIG_STEPPERS_TOSHIBA alone.</p>

<hr>

<h3 id="endstops">Endstops</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define USE_XMIN_PLUG
#define USE_YMIN_PLUG
#define USE_ZMIN_PLUG
</span><span class="c1">//#define USE_XMAX_PLUG
//#define USE_YMAX_PLUG
//#define USE_ZMAX_PLUG
</span></code></pre>
</div>

<p>This allows you to select where the endstops are located on your printer. Most printers will use a single endstop per axis on the min side. It is possible to place endstops on both ends of an axis but it is rarely necessary in practice. Instead you should make sure that your stepper and build area setting are correct. One noteable exception here is that Delta’s use three endstops on the max side of the towers.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">// coarse Endstop Settings
</span><span class="cp">#define ENDSTOPPULLUPS // Comment this out to disable the endstop pullup resistors
</span>
<span class="cp">#if DISABLED(ENDSTOPPULLUPS)
</span>  <span class="c1">// fine endstop settings: Individual pullups. will be ignored if ENDSTOPPULLUPS is defined
</span>  <span class="c1">//#define ENDSTOPPULLUP_XMAX
</span>  <span class="c1">//#define ENDSTOPPULLUP_YMAX
</span>  <span class="c1">//#define ENDSTOPPULLUP_ZMAX
</span>  <span class="c1">//#define ENDSTOPPULLUP_XMIN
</span>  <span class="c1">//#define ENDSTOPPULLUP_YMIN
</span>  <span class="c1">//#define ENDSTOPPULLUP_ZMIN
</span>  <span class="c1">//#define ENDSTOPPULLUP_ZMIN_PROBE
</span><span class="cp">#endif
</span></code></pre>
</div>

<p>Edit these values if you need to disable the pullup resistors for your endstop. Most likely you will not need to edit this.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">// Mechanical endstop with COM to ground and NC to Signal uses "false" here (most common setup).
</span><span class="cp">#define X_MIN_ENDSTOP_INVERTING false // set to true to invert the logic of the endstop.
#define Y_MIN_ENDSTOP_INVERTING false // set to true to invert the logic of the endstop.
#define Z_MIN_ENDSTOP_INVERTING false // set to true to invert the logic of the endstop.
#define X_MAX_ENDSTOP_INVERTING false // set to true to invert the logic of the endstop.
#define Y_MAX_ENDSTOP_INVERTING false // set to true to invert the logic of the endstop.
#define Z_MAX_ENDSTOP_INVERTING false // set to true to invert the logic of the endstop.
#define Z_MIN_PROBE_ENDSTOP_INVERTING false // set to true to invert the logic of the endstop.
</span></code></pre>
</div>

<p>These value can be toggled by issuing the M119 command. Usually these are left alone. However if you would rather change it here then mess with your wiring go ahead.</p>

<hr>

<h3 id="z-probe-options">Z Probe Options</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//#define Z_MIN_PROBE_ENDSTOP
</span></code></pre>
</div>

<p>If you want to use both probe and end-switch for homing and endstop, enable this. However, This requires extra setups to be done. If you’re using Ramps 1.4, the probe pins are located in D32 of the aux4 array that is also used by the lcd panel. You will have to change the pin assignments from your specified board pin file (for example “pins_RAMPS_14.h”) located at <code class="highlighter-rouge">#define Z_MIN_PROBE_PIN  32</code>. I would change this to pin 19 (z max) since it is rarely if ever used. This extra port is actually the Z Probe that is used for your auto bed leveling.</p>

<p>Another way is to change between these pins: <code class="highlighter-rouge">#define Z_MIN_PROBE_PIN  32</code>, <code class="highlighter-rouge">#define Z_MIN_PIN 18</code>, and <code class="highlighter-rouge">#define Z_MAX_PIN 19</code>  according to your board. This is not for beginners.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define Z_MIN_PROBE_USES_Z_MIN_ENDSTOP_PIN
</span></code></pre>
</div>

<p>This uses the same pin for the end-switch and the probe. The advantage is that you don’t need to alter any pin-out assignments, however you can only have ONE active at a time.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//#define DISABLE_Z_MIN_PROBE_ENDSTOP
</span></code></pre>
</div>

<p>This typically disables your probe feature. Only applicable to <code class="highlighter-rouge">//#define Z_MIN_PROBE_ENDSTOP</code> enabled</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define Z_MIN_PROBE_REPEATABILITY_TEST
</span></code></pre>
</div>

<p>This enables you to test the reliability of your probe.
Issue a M48 command to start testing. It will give you a standard deviation for the probe.
Tip: 0.02 mm is normally acceptable for bed leveling to work.</p>

<hr>

<h3 id="motor-movement">Motor Movement</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">// For Inverting Stepper Enable Pins (Active Low) use 0, Non Inverting (Active High) use 1
// :{0:'Low',1:'High'}
</span><span class="cp">#define X_ENABLE_ON 0
#define Y_ENABLE_ON 0
#define Z_ENABLE_ON 0
#define E_ENABLE_ON 0 // For all extruders
</span></code></pre>
</div>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define DISABLE_X false
#define DISABLE_Y false
#define DISABLE_Z false
</span></code></pre>
</div>

<p>Enabling this value will disable the given stepper when it is not being issued a movement. This is a hack for running steppers at higher than normal current in an effort to produce more torque at the cost of increased thermals for driver and stepper.</p>

<p>Disabling the steppers in between moves gives the motors and drivers have a chance to cool off. That sounds good but there’s a catch. Because the steppers are disabled they will not be holding the carriage stable. This WILL result in bad accuracy and carries a strong probability of axial drift. The most benefit is achieved where long moves on a single axis are performed.</p>

<p>Most 3d printers use open loop control systems. This means that the software has no idea what the actual position of the carriage is at a given time. It simply sends commands and assumes they have been obeyed. In practice with a well calibrated machine this is not an issue and using an open loop is a major cost saving with excellent quality.</p>

<p>We really don’t recommend this hack as the cons far outweigh the pros. There are much better ways to address the problem of stepper/driver overheating. Some examples: stepper/driver heatsink, active cooling, dual motors on the axis, reduce microstepping, check belt for over tension, check components for smooth motion, etc.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//#define DISABLE_REDUCED_ACCURACY_WARNING
</span></code></pre>
</div>

<p>This can be enabled to prevent a warning displaying on the screen if the warning given above is ignored.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define DISABLE_E false // For all extruders
#define DISABLE_INACTIVE_EXTRUDER true //disable only inactive extruders and keep active extruder enabled
</span></code></pre>
</div>

<p>This is similar to the above stepper disable but is a little different because it is regards to the extruder. The default value is to keep the active extruder enabled, and to disable inactive extruders. An example situation where this applies is  the experimental 4 extruder 1 hotend setup for the Original Prusa i3 MK2.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define INVERT_X_DIR true
#define INVERT_Y_DIR false
#define INVERT_Z_DIR true
#define INVERT_E0_DIR false
#define INVERT_E1_DIR false
#define INVERT_E2_DIR false
#define INVERT_E3_DIR false
</span></code></pre>
</div>

<p>This value inverts the motor movement for each axis. If proper caution is not exercised when setting this, the axes WILL crash to the wrong direction when you attempt to home potentially causing damage. Make sure before homing that the carriage is close to the middle and manually move each axis via the lcd menu or printer host to check that the carriage moves as expected. If it is discovered that an axis is inverted, change the wiring or invert the value above, not both.</p>

<hr>

<h3 id="axis-homing">Axis Homing</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//#define MIN_Z_HEIGHT_FOR_HOMING 4
</span></code></pre>
</div>

<p>This value raises z to the specified height above the bed before homing in x or y. This is useful to prevent the head crashing into bed mountings such as screws, bulldog clips and the like that project above the printing bed surface. This also works with auto bed leveling enabled and will be triggered only when the z axis height is less than the defined value, otherwise the z axis will not move.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define X_HOME_DIR -1
#define Y_HOME_DIR -1
#define Z_HOME_DIR -1
</span></code></pre>
</div>

<p>This tells Marlin where the head is located when all the endstop have been triggered. -1 indicates min and 1 indicates max. The typical configuration for cartesian and core xy is to put the endstops at the min and for deltas to put the endstops at the max. If your machine is custom it’s up to you to set these values correctly. Setting the <code class="highlighter-rouge">home_dir</code> incorrectly will lead to a mirrored print.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define min_software_endstops true
#define max_software_endstops true
</span></code></pre>
</div>

<p>These values when enabled (default) allow you to set software limits on how far these axis can travel via manual control.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define X_MIN_POS 0
#define Y_MIN_POS 0
#define Z_MIN_POS 0
#define X_MAX_POS 200
#define Y_MAX_POS 200
#define Z_MAX_POS 170
</span></code></pre>
</div>

<p>Usually the <code class="highlighter-rouge">MIN_POS</code> values are left at 0. <code class="highlighter-rouge">MAX_POS</code> is the maximum travel distance from the minimum. Setting the maximum too high will result in the axis crashing. If your home position is not in the printable area you will also need to set the home offset variable in the eeprom. If you don’t want to set it using eeprom, you can fiddle with the <code class="highlighter-rouge">MIN_POS</code> value above instead.</p>

<div class="panel panel-info">
<div class="panel-heading">
<i class="fa fa-info-circle pull-left" aria-hidden="true"></i><h4 class="panel-title">Home Offset</h4>
</div>
<div class="panel-body">
<p>
</p>
<p>Values are pulled from <code class="highlighter-rouge">MIN_POS</code>. Use <code class="highlighter-rouge">M206</code> from host program console.</p>
</div>
</div>

<hr>

<h3 id="filament-runout-sensor">Filament Runout Sensor</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//#define FILAMENT_RUNOUT_SENSOR
</span><span class="n">In</span> <span class="n">RAMPS</span> <span class="n">uses</span> <span class="n">servo</span> <span class="n">pin</span> <span class="mf">2.</span> <span class="n">Can</span> <span class="n">be</span> <span class="n">changed</span> <span class="n">in</span> <span class="n">pins</span> <span class="n">file</span><span class="p">.</span> <span class="n">For</span> <span class="n">other</span> <span class="n">boards</span> <span class="n">pin</span> <span class="n">definition</span> <span class="n">should</span> <span class="n">be</span> <span class="n">made</span><span class="p">.</span>
<span class="cp">#if ENABLED(FILAMENT_RUNOUT_SENSOR)
</span>  <span class="k">const</span> <span class="kt">bool</span> <span class="n">FIL_RUNOUT_INVERTING</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
  <span class="cp">#define ENDSTOPPULLUP_FIL_RUNOUT
</span>  <span class="cp">#define FILAMENT_RUNOUT_SCRIPT "M600"
#endif
</span></code></pre>
</div>

<p>This is an optional but cool feature to have. A switch is used to detect if the filament is present in the feeder (usually an extra endstop switch located at the inlet of the feeder, with the switch in a closed state when the filament is present. If the filament runs out, an M600 command will be issued immediately. If you are using a RAMPS board the default input is servo pin 2. For all other boards you will need to create a pin definition in the corresponding file in order to use this feature.</p>

<hr>

<h2 id="bed-leveling">Bed Leveling</h2>

<h3 id="meshmanual-bed-leveling">Mesh/Manual Bed Leveling</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//#define MESH_BED_LEVELING
</span></code></pre>
</div>

<p>If your machine lacks a probe, it is still possible to measure and correct for imperfections in the bed. The <code class="highlighter-rouge">MESH_BED_LEVELING</code> option provides a procedure for measuring the bed height at several points using a piece of paper or feeler gauge. See <a href="/docs/gcode/G29-mbl.html"><code class="highlighter-rouge">G29</code> for MBL</a> for more details.</p>

<p>Enable <code class="highlighter-rouge">MANUAL_BED_LEVELING</code> to be able to do interactive Mesh Bed Leveling from the LCD controller.</p>

<hr>

<h3 id="auto-bed-leveling">Auto Bed Leveling</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//#define AUTO_BED_LEVELING_3POINT
//#define AUTO_BED_LEVELING_LINEAR
//#define AUTO_BED_LEVELING_BILINEAR
</span></code></pre>
</div>

<p>If you have a bed probe, you can enable one of these options to use Auto Bed Leveling. The <code class="highlighter-rouge">G29</code> command can then be used to automatically probe the bed and measure its height at various points and produce a correction grid or matrix.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//#define DEBUG_LEVELING_FEATURE
</span></code></pre>
</div>

<p>Use this option to enable extra debugging of homing and leveling. You can then use <code class="highlighter-rouge">M111 S32</code> before issuing <code class="highlighter-rouge">G28</code> and <code class="highlighter-rouge">G29 V4</code> to get a detailed log of the process for diagnosis. This option is useful to figure out the cause of unexpected behaviors, or when reporting issues to the project.</p>

<hr>

<h2 id="linear--bilinear-options">
<code class="highlighter-rouge">LINEAR</code> / <code class="highlighter-rouge">BILINEAR</code> options</h2>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define LEFT_PROBE_BED_POSITION 15
#define RIGHT_PROBE_BED_POSITION 145
#define FRONT_PROBE_BED_POSITION 20
#define BACK_PROBE_BED_POSITION 150
</span></code></pre>
</div>

<p>These settings specify the boundaries for probing with <code class="highlighter-rouge">G29</code>. This will most likely be a sub-section of the bed because probes are not usually able to reach every point that the nozzle can. Take account of the probe’s XY offsets when setting these boundaries.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define ABL_GRID_MAX_POINTS_X 3
#define ABL_GRID_MAX_POINTS_Y ABL_GRID_MAX_POINTS_X
</span></code></pre>
</div>

<p>These options specify the default number of points to probe in each dimension during <code class="highlighter-rouge">G29</code>.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//#define PROBE_Y_FIRST
</span></code></pre>
</div>

<p>Enable this option if probing should proceed in the Y dimension first instead of X first.</p>

<hr>

<h2 id="leveling-fade-height">Leveling Fade Height</h2>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define ENABLE_LEVELING_FADE_HEIGHT
</span></code></pre>
</div>

<p>Available only with <code class="highlighter-rouge">AUTO_BED_LEVELING_BILINEAR</code> and <code class="highlighter-rouge">MESH_BED_LEVELING</code>. With this option the <code class="highlighter-rouge">M420 Zn</code> command can be used to set a fade distance over which leveling will be gradually reduced. Above the given Z height, leveling compensation will no longer be applied.</p>

<p>Example: <code class="highlighter-rouge">M420 Z10</code> sets leveling to fade within the first 10mm of layer printing. If each layer is 0.2mm high, then leveling compensation is reduced by 1/50th (2%) after each layer. Above 10mm the machine will move without compensation.</p>

<hr>

<h2 id="point-options">
<code class="highlighter-rouge">3POINT</code> options</h2>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define ABL_PROBE_PT_1_X 15
#define ABL_PROBE_PT_1_Y 180
#define ABL_PROBE_PT_2_X 15
#define ABL_PROBE_PT_2_Y 20
#define ABL_PROBE_PT_3_X 170
#define ABL_PROBE_PT_3_Y 20
</span></code></pre>
</div>

<p>These options specify the three points that will be probed during <code class="highlighter-rouge">G29</code>.</p>

<hr>

<h4 id="probe-offsets-em-classfa-fa-sticky-note-o-aria-hiddentrueem-em-classfa-fa-desktop-aria-hiddentrueem">Probe Offsets <em class="fa fa-sticky-note-o" aria-hidden="true"></em> <em class="fa fa-desktop" aria-hidden="true"></em>
</h4>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define X_PROBE_OFFSET_FROM_EXTRUDER -44  // X offset: -left  [of the nozzle] +right
#define Y_PROBE_OFFSET_FROM_EXTRUDER -8  // Y offset: -front [of the nozzle] +behind
#define Z_PROBE_OFFSET_FROM_EXTRUDER -2.50   // Z offset: -below [the nozzle](for most negative! positive when using tilt probes or the nozzle based probes)
</span></code></pre>
</div>

<p>These offsets specify the distance from the tip of the nozzle to the probe — or more precisely, to the point at which the probe triggers. The X and Y offsets are specified as integers. The Z offset should be specified as exactly as possible using a decimal value. The Z offset can be overridden with <code class="highlighter-rouge">M851 Z</code> or the LCD controller. The <code class="highlighter-rouge">M851</code> offset is saved to EEPROM with <code class="highlighter-rouge">M500</code>.</p>

<hr>

<h4 id="probing-behavior">Probing Behavior</h4>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define Z_CLEARANCE_DEPLOY_PROBE   10 // Z Clearance for Deploy/Stow
#define Z_CLEARANCE_BETWEEN_PROBES  5 // Z Clearance between probe points
</span></code></pre>
</div>

<p>Z probes require clearance when deploying, stowing, and moving between probe points to avoid hitting the bed and other hardware. Servo-mounted probes require extra space for the arm to rotate. Inductive probes need space to keep from triggering early.</p>

<p>Use these settings to specify the distance (mm) to raise the probe (or lower the bed). The values set here apply over and above any (negative) probe Z Offset set with <code class="highlighter-rouge">Z_PROBE_OFFSET_FROM_EXTRUDER</code>, <code class="highlighter-rouge">M851</code>, or the LCD. Only integer values &gt;= 1 are valid for these settings.</p>

<ul>
  <li>
<em>Example</em>: <code class="highlighter-rouge">M851 Z-5</code> with a CLEARANCE of 4  =&gt;  9mm from bed to nozzle.</li>
  <li>
<em>But</em>: <code class="highlighter-rouge">M851 Z+1</code> with a CLEARANCE of 2  =&gt;  2mm from bed to nozzle.</li>
</ul>

<div class="panel panel-warning">
<div class="panel-heading">
<i class="fa fa-exclamation-circle pull-left" aria-hidden="true"></i><h4 class="panel-title">G29 Movement</h4>
</div>
<div class="panel-body">
<p>
</p>
<p>Make sure you have enough clearance for the probe to move between points!</p>
</div>
</div>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//#define Z_PROBE_END_SCRIPT "G1 Z10 F12000\nG1 X15 Y330\nG1 Z0.5\nG1 Z10"
</span></code></pre>
</div>

<p>A custom script to do at the very end of <code class="highlighter-rouge">G29</code>. If multiple commands are needed, divide them with <code class="highlighter-rouge">\n</code> (the newline character).</p>

<hr>

<h4 id="probe-type">Probe Type</h4>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define FIX_MOUNTED_PROBE
</span></code></pre>
</div>

<p>This in theory are for proximity sensors. Since using proximity sensors are fixed probe (not retractable), this feature will ignore the z probe triggered state during printing or other than G28/G29 command so that you’re able to bring the nozzle closer to the bed.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define Z_PROBE_SLED
</span></code></pre>
</div>
<p>This is almost the same like proximity sensors where there are another carriage that are meant for the sensor. The x carriage will move to the sled and latch itself to bring the sled for probing process, then when it is done the sled will be parked again. Default: Disabled</p>

<hr>

<h4 id="z-safe-homing">Z Safe Homing</h4>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cm">/**
 * Z Safe Homing
 *
 * Enable this option to avoid homing with a Z probe outside the bed area.
 *
 * With safe homing enabled:
 *
 * - Allow Z homing only after X and Y homing AND stepper drivers still enabled.
 * - If stepper drivers time out, it will need X and Y homing again before Z homing.
 * - Move the Z probe (or nozzle) to a defined XY point before Z Homing when homing all axes (G28).
 * - Prevent Z homing when the Z probe is outside bed area.
 */</span>
<span class="cp">#define Z_SAFE_HOMING
</span>
<span class="cp">#if ENABLED(Z_SAFE_HOMING)
</span>  <span class="cp">#define Z_SAFE_HOMING_X_POINT ((X_MIN_POS + X_MAX_POS) / 2)    // X point for Z homing when homing all axis (G28).
</span>  <span class="cp">#define Z_SAFE_HOMING_Y_POINT ((Y_MIN_POS + Y_MAX_POS) / 2)    // Y point for Z homing when homing all axis (G28).
#endif
</span></code></pre>
</div>

<p>This option causes the nozzle to move to a selected point (by default, the middle of the bed) when homing the Z axis. As a side-effect, homing of XY is required for Z to home. Enable this option if a probe (not an endstop) is being used for Z homing. Z Safe Homing isn’t needed if a Z endstop is used for homing, but it may also be enabled just to have XY move to some custom position after homing.</p>

<hr>

<h2 id="movement">Movement</h2>

<h3 id="homing-speed">Homing Speed</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">// Homing speeds (mm/m)
</span><span class="cp">#define HOMING_FEEDRATE_XY (50*60)
#define HOMING_FEEDRATE_Z  (4*60)
</span></code></pre>
</div>

<p>Homing speed for use in auto home and auto bed leveling. These values may be set to the fastest speeds your machine can achieve. Homing and probing speeds are constrained by the current max feedrate and max acceleration settings.</p>

<div class="container-fluid">  <div class="row alert alert-warning custom-alert">    <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon">      <i class="fa fa-exclamation-circle fa-4x" aria-hidden="true"></i>    </div>    <div class="col-lg-11 col-md-10 custom-alert-text">      
<p>Setting these values too high may result in reduced accuracy and/or skipped steps. Reducing acceleration may help to achieve higher top speeds.</p>
    </div>  </div>
</div>

<hr>

<h3 id="default-steps-per-mm">Default Steps per mm</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cm">/**
 * Default Axis Steps Per Unit (steps/mm)
 * Override with M92
 *                                      X, Y, Z, E0 [, E1[, E2[, E3]]]
 */</span>
<span class="cp">#define DEFAULT_AXIS_STEPS_PER_UNIT   { 80, 80, 4000, 500 }
</span></code></pre>
</div>

<p>These are the most crucial settings for your printer, as they determine how accurately the steppers will position the axes. Here we’re telling the firmware how many individual steps produce a single millimeter (or degree on SCARA) of movement. These depend on various factors, including belt pitch, number of teeth on the pulley, thread pitch on leadscrews, micro-stepping settings, and extruder style.</p>

<p>A useful trick is to let the compiler do the calculations for you and just supply the raw values. For example:</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define NEMA17_FULL_STEPS 200.0
#define NEMA17_MICROSTEPS 16.0
#define NEMA17_MOTOR_STEPS (NEMA17_FULL_STEPS * NEMA17_MICROSTEPS)
#define PULLEY_PITCH 2.0
#define PULLEY_TEETH 20.0
#define Z_ROD_PITCH 0.8
</span>
<span class="cp">#define WADE_PULLEY_TEETH 11.0
#define WADE_GEAR_TEETH 45.0
#define HOBBED_BOLT_DIAM 6.0
</span>
<span class="cp">#define XY_STEPS (NEMA17_MOTOR_STEPS / (PULLEY_PITCH * PULLEY_TEETH))
#define Z_STEPS (NEMA17_MOTOR_STEPS / Z_ROD_PITCH)
#define WADE_GEAR_RATIO (WADE_GEAR_TEETH / WADE_PULLEY_TEETH)
#define HOBBED_BOLD_CIRC (M_PI * HOBBED_BOLT_DIAM)
#define WADE_E_STEPS (NEMA17_MOTOR_STEPS * WADE_GEAR_RATIO / HOBBED_BOLD_CIRC)
</span>
<span class="cp">#define DEFAULT_AXIS_STEPS_PER_UNIT   { XY_STEPS, XY_STEPS, Z_STEPS, ENG2_E_STEPS }
</span></code></pre>
</div>

<div class="panel panel-info">
<div class="panel-heading">
<i class="fa fa-info-circle pull-left" aria-hidden="true"></i><h4 class="panel-title">Step Calculator</h4>
</div>
<div class="panel-body">
<p>
</p>
<p>The <a href="http://prusaprinters.org/calculator/">Prusa Calculator</a> is a great tool to help find the right values for your specific printer configuration.</p>
</div>
</div>

<hr>

<h4 id="default-max-feed-rate">Default Max Feed Rate</h4>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cm">/**
 * Default Max Feed Rate (mm/s)
 * Override with M203
 *                                      X, Y, Z, E0 [, E1[, E2[, E3]]]
 */</span>
<span class="cp">#define DEFAULT_MAX_FEEDRATE { 500, 500, 2.25, 45 }
</span></code></pre>
</div>

<p>In any move, the velocities (in mm/sec) in the X, Y, Z, and E directions will be limited to the corresponding <code class="highlighter-rouge">DEFAULT_MAX_FEEDRATE</code>.</p>

<div class="container-fluid">  <div class="row alert alert-danger custom-alert">    <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon">      <i class="fa fa-exclamation-triangle fa-4x" aria-hidden="true"></i>    </div>    <div class="col-lg-11 col-md-10 custom-alert-text">      
<p>Setting these too high will cause the corresponding stepper motor to lose steps, especially on high speed movements.</p>
    </div>  </div>
</div>

<hr>

<h3 id="acceleration">Acceleration</h3>

<h4 id="default-max-acceleration">Default Max Acceleration</h4>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cm">/**
 * Default Max Acceleration (change/s) change = mm/s
 * (Maximum start speed for accelerated moves)
 * Override with M201
 *                                      X, Y, Z, E0 [, E1[, E2[, E3]]]
 */</span>
<span class="cp">#define DEFAULT_MAX_ACCELERATION      { 3000, 3000, 100, 10000 }
</span></code></pre>
</div>

<p>When the velocity of any axis changes, its acceleration (or deceleration) in mm/s/s is limited by the current max acceleration setting. Also see the <em>jerk</em> settings below, which specify the largest instant speed change that can occur between segments.</p>

<p>A value of 3000 means that an axis may accelerate from 0 to 3000mm/m (50mm/s) within a one second movement.</p>

<p>Jerk sets the floor for accelerated moves. If the change in top speed for a given axis between segments is less than the jerk value for the axis, an instantaneous change in speed may be allowed. Limits placed on other axes also apply. Basically, lower jerk values result in more accelerated moves, which may be near-instantaneous in some cases, depending on the final acceleration determined by the planner.</p>

<hr>

<h4 id="default-acceleration">Default Acceleration</h4>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cm">/**
 * Default Acceleration (change/s) change = mm/s
 * Override with M204
 *
 *   M204 P    Acceleration
 *   M204 R    Retract Acceleration
 *   M204 T    Travel Acceleration
 */</span>
<span class="cp">#define DEFAULT_ACCELERATION          3000    // X, Y, Z and E acceleration for printing moves
#define DEFAULT_RETRACT_ACCELERATION  3000    // E acceleration for retracts
#define DEFAULT_TRAVEL_ACCELERATION   3000    // X, Y, Z acceleration for travel (non printing) moves
</span></code></pre>
</div>

<p>The planner uses the default accelerations set here (or by <code class="highlighter-rouge">M204</code>) as the starting values for movement acceleration, and then constrains them further, if needed. There are separate default acceleration values for printing moves, retraction moves, and travel moves.</p>

<ul>
  <li>Printing moves include E plus at least one of the XYZ axes.</li>
  <li>Retraction moves include only the E axis.</li>
  <li>Travel moves include only the XYZ axes.</li>
</ul>

<p>In print/travel moves, <code class="highlighter-rouge">DEFAULT_ACCELERATION</code> and <code class="highlighter-rouge">DEFAULT_TRAVEL_ACCELERATION</code> apply to the XYZ axes. In retraction moves, <code class="highlighter-rouge">DEFAULT_RETRACT_ACCELERATION</code> applies only to the <em>E</em>-axis. During movement planning, Marlin constrains the default accelerations to the maximum acceleration of all axes involved in the move.</p>

<div class="container-fluid">  <div class="row alert alert-danger custom-alert">    <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon">      <i class="fa fa-exclamation-triangle fa-4x" aria-hidden="true"></i>    </div>    <div class="col-lg-11 col-md-10 custom-alert-text">      
<p>Don’t set these too high. Larger acceleration values can lead to excessive vibration, noisy steppers, or even skipped steps. Lower acceleration produces smoother motion, eliminates vibration, and helps reduce wear on mechanical parts.</p>
    </div>  </div>
</div>

<hr>

<h4 id="jerk">Jerk</h4>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cm">/**
 * Default Jerk (mm/s)
 * Override with M205 X Y Z E
 *
 * "Jerk" specifies the minimum speed change that requires acceleration.
 * When changing speed and direction, if the difference is less than the
 * value set here, it may happen instantaneously.
 */</span>
<span class="cp">#define DEFAULT_XJERK                 20.0
#define DEFAULT_YJERK                 20.0
#define DEFAULT_ZJERK                  0.4
#define DEFAULT_EJERK                  5.0
</span></code></pre>
</div>

<p>Jerk works in conjunction with acceleration (see above). Jerk is the maximum change in velocity (in mm/sec) that can occur instantaneously. It can also be thought of as the minimum change in velocity that will be done as an accelerated (not instantaneous) move.</p>

<p>Both acceleration and jerk affect your print quality. If jerk is too low, the extruder will linger too long on small segments and corners, possibly leaving blobs. If the jerk is set too high, direction changes will apply too much torque and you may see “ringing” artifacts or dropped steps.</p>

<hr>

<h2 id="additional-features">Additional Features</h2>

<h3 id="eeprom">EEPROM</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define EEPROM_SETTINGS
</span></code></pre>
</div>

<p>Commands like <code class="highlighter-rouge">M92</code> only change the settings in volatile memory, so these settings may be lost when the machine is powered off. This option enables the built-in EEPROM to preserve these settings across reboots. Settings saved to EEPROM (with <code class="highlighter-rouge">M500</code>) are loaded automatically whenever the machine restarts (and in most setups, when connecting to a host), overriding the defaults set in the configuration files. This option is highly recommended, as it makes configurations easier to manage.</p>

<p>The EEPROM-related commands are:</p>

<ul>
  <li>
<code class="highlighter-rouge">M500</code>: Save all current settings to EEPROM.</li>
  <li>
<code class="highlighter-rouge">M501</code>: Load all settings last saved to EEPROM.</li>
  <li>
<code class="highlighter-rouge">M502</code>: Reset all settings to their default values (as set by <code class="highlighter-rouge">Configuration.h</code>)</li>
  <li>
<code class="highlighter-rouge">M503</code>: Print the current settings (in RAM, not EEPROM)</li>
</ul>

<div class="container-fluid">  <div class="row alert alert-info custom-alert">    <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon">      <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i>    </div>    <div class="col-lg-11 col-md-10 custom-alert-text">      
<p>Settings that can be changed and saved to EEPROM are marked with <em class="fa fa-sticky-note-o" aria-hidden="true"></em>. Options marked with <em class="fa fa-desktop" aria-hidden="true"></em> can be changed from the LCD controller.</p>
    </div>  </div>
</div>

<div class="container-fluid">  <div class="row alert alert-info custom-alert">    <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon">      <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i>    </div>    <div class="col-lg-11 col-md-10 custom-alert-text">      
<p>Certain EEPROM behaviors may be confusing. For example, when you edit the configurations and re-flash the firmware, you may discover that your new settings don’t have any effect! What’s going on? They are still being overridden by the EEPROM! To apply and preserve your new settings, use <code class="highlighter-rouge">M502</code> to restore settings to the configured defaults, then <code class="highlighter-rouge">M500</code> to write them to EEPROM. You can always use <code class="highlighter-rouge">M503</code> to view the current settings in volatile memory (even without EEPROM enabled).</p>
    </div>  </div>
</div>

<hr>

<h3 id="inch-units-support">Inch Units Support</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//#define INCH_MODE_SUPPORT
</span></code></pre>
</div>

<p>This option adds support for the <code class="highlighter-rouge">G20</code> and <code class="highlighter-rouge">G21</code> commands, allowing GCode to specify units in inches.</p>

<hr>

<h3 id="material-preheat-presets-em-classfa-fa-sticky-note-o-text-info-aria-hiddentrueem-em-classfa-fa-desktop-text-info-aria-hiddentrueem">Material Preheat Presets <em class="fa fa-sticky-note-o text-info" aria-hidden="true"></em> <em class="fa fa-desktop text-info" aria-hidden="true"></em>
</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define PREHEAT_1_TEMP_HOTEND 180
#define PREHEAT_1_TEMP_BED     70
#define PREHEAT_1_FAN_SPEED     0 // Value from 0 to 255
</span>
<span class="cp">#define PREHEAT_2_TEMP_HOTEND 240
#define PREHEAT_2_TEMP_BED    110
#define PREHEAT_2_FAN_SPEED     0 // Value from 0 to 255
</span></code></pre>
</div>

<p>These are the default values for the <code class="highlighter-rouge">Prepare</code> &gt; <code class="highlighter-rouge">Preheat</code> LCD menu options. These values can be overridden using the <code class="highlighter-rouge">M145</code> command or the <code class="highlighter-rouge">Control</code> &gt; <code class="highlighter-rouge">Temperature</code> &gt; <code class="highlighter-rouge">Preheat Material X conf</code> submenus.</p>

<hr>

<h2 id="lcd-and-sd-card">LCD and SD Card</h2>

<h3 id="lcd-language">LCD Language</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define LCD_LANGUAGE en
</span></code></pre>
</div>

<p>Choose your preferred language for the LCD controller here. See <code class="highlighter-rouge">language.h</code> for the current list of languages and their international language codes.</p>

<h3 id="lcd-character-set">LCD Character Set</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define DISPLAY_CHARSET_HD44780 JAPANESE
</span></code></pre>
</div>

<p>This option applies only to character-based displays. Character-based displays (based on the Hitachi HD44780) provide an ASCII character set plus one of the following language extensions:</p>

<ul>
  <li>
<code class="highlighter-rouge">JAPANESE</code> … the most common</li>
  <li>
<code class="highlighter-rouge">WESTERN</code> …. with more accented characters</li>
  <li>
<code class="highlighter-rouge">CYRILLIC</code> … for the Russian language</li>
</ul>

<p>To determine the language extension installed on your controller:</p>

<ul>
  <li>Compile and upload with <code class="highlighter-rouge">LCD_LANGUAGE</code> set to ‘test’</li>
  <li>Click the controller to view the LCD menu</li>
  <li>The LCD will display Japanese, Western, or Cyrillic text</li>
</ul>

<p>See https://github.com/MarlinFirmware/Marlin/wiki/LCD-Language</p>

<h3 id="sd-card-slot">SD Card Slot</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define SDSUPPORT // Enable SD Card Support in Hardware Console
</span></code></pre>
</div>

<p>Required to use SD printing, whether as part of an LCD controller or as a standalone SDCard module.</p>

<div class="container-fluid">  <div class="row alert alert-info custom-alert">    <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon">      <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i>    </div>    <div class="col-lg-11 col-md-10 custom-alert-text">      
<p>The <code class="highlighter-rouge">SDSUPPORT</code> option must be enabled or SD printing will not be supported. It is no longer enabled automatically for LCD controllers with built-in SDCard slot.</p>
    </div>  </div>
</div>

<hr>

<h3 id="lcd-type">LCD Type</h3>

<p>Marlin includes support for several controllers. The two most popular controllers supported by Marlin are:</p>

<ul>
  <li>
<code class="highlighter-rouge">REPRAP_DISCOUNT_SMART_CONTROLLER</code> A 20 x 4 character-based LCD controller with click-wheel.</li>
  <li>
<code class="highlighter-rouge">REPRAP_DISCOUNT_FULL_GRAPHIC_SMART_CONTROLLER</code> A monochrome 128 x 64 pixel-based LCD controller with click-wheel.</li>
</ul>

<p>See <code class="highlighter-rouge">Configuration.h</code> for the full list of supported controllers.</p>

<hr>

<h2 id="paste-extruder">Paste Extruder</h2>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">// Support for the BariCUDA Paste Extruder.
//#define BARICUDA
</span></code></pre>
</div>

<p>Marlin includes support for the <a href="http://www.thingiverse.com/thing:26343">Baricuda Extruder for 3D Printing Sugar and Chocolate</a> also <a href="http://www.github.com/jmil/BariCUDA">hosted on GitHub</a>. The feature adds the codes <code class="highlighter-rouge">M126</code>, <code class="highlighter-rouge">M127</code>, <code class="highlighter-rouge">M128</code>, and <code class="highlighter-rouge">M129</code> for controlling the pump and valve of the Baricuda.</p>

<hr>

<h2 id="indicator-leds">Indicator LEDs</h2>

<p>Marlin currently supplies two options for RGB-addressable color indicators. The color is set using <code class="highlighter-rouge">M150 Rr Ug Bb</code> to specify R, G, and B components from 0 to 255.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//define BlinkM/CyzRgb Support
//#define BLINKM
</span></code></pre>
</div>

<p>The BLINKM board supplies the backlighting for some LCD controllers. Its color is set using I2C messages.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">// Support for an RGB LED using 3 separate pins with optional PWM
//#define RGB_LED
</span><span class="cp">#if ENABLED(RGB_LED)
</span>  <span class="cp">#define RGB_LED_R_PIN 34
</span>  <span class="cp">#define RGB_LED_G_PIN 43
</span>  <span class="cp">#define RGB_LED_B_PIN 35
#endif
</span></code></pre>
</div>

<p>An inexpensive RGB LED can be used simply by assigning digital pins for each component. If the pins are able to do hardware PWM then a wide range of colors will be available. With simple digital pins only 7 colors are possible.</p>

<hr>

<h2 id="servos">Servos</h2>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define NUM_SERVOS 1 // Servo index starts with 0 for M280 command
</span></code></pre>
</div>

<p>The total number of servos to enable for use. One common application for a servo is a Z bed probe consisting of an endstop switch mounted on a rotating arm. To use one of the servo connectors for this type of probe, set <code class="highlighter-rouge">Z_ENDSTOP_SERVO_NR</code> below.</p>

<hr>

<h3 id="servo-placement-and-angle">Servo Placement and Angle</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//#define Z_ENDSTOP_SERVO_NR 0
//#define Z_SERVO_ANGLES {70,0} // Z Servo Deploy and Stow angles
</span></code></pre>
</div>

<p>The Z probe’s servo index and the servo deploy/stow angles. To determine the best angles, experiment with the <code class="highlighter-rouge">M280</code> command.</p>

<hr>

<h3 id="servo-deactivation">Servo Deactivation</h3>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define DEACTIVATE_SERVOS_AFTER_MOVE
</span>
<span class="cp">#if ENABLED(DEACTIVATE_SERVOS_AFTER_MOVE)
</span>  <span class="cp">#define SERVO_DEACTIVATION_DELAY 1250
#endif
</span></code></pre>
</div>

<p>This setting causes servos to deactivate after every movement. It is recommended to enable this option to keep the electrical noise from active servos from interfering with other components. The high amperage generated by extruder motor wiring during movement can also induce movement in active servos. Leave this option enabled to avoid all such servo-related troubles.</p>

<p>Specify a large enough delay so the servo has enough time to complete a full motion before deactivation.</p>

<hr>

<h2 id="filament-sensor">Filament Sensor</h2>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="c1">//#define FILAMENT_WIDTH_SENSOR
</span></code></pre>
</div>

<p>Enable if you have a filament width sensor (e.g., <a href="http://www.thingiverse.com/thing:454584">Filament Width Sensor Prototype Version 3</a>). With a filament sensor installed, Marlin can adjust the flow rate according to the measured filament width. Adjust the sub-options below according to your setup.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define DEFAULT_NOMINAL_FILAMENT_DIA 3.00
</span></code></pre>
</div>

<p>The “nominal” filament diameter as written on the filament spool. If you typically use 1.75mm filament, but physically measure the diameter as 1.70mm, you should still use 1.75. Marlin will compensate automatically. The same goes for 3.00mm filament that measures closer to 2.85mm.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define FILAMENT_SENSOR_EXTRUDER_NUM 0
</span></code></pre>
</div>

<p>Only one extruder can have a filament sensor. Specify here which extruder has it.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define MEASUREMENT_DELAY_CM        14
</span></code></pre>
</div>

<p>Distance from the filament width sensor to the middle of the filament path (i.e., the nozzle opening).</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define MEASURED_UPPER_LIMIT         3.30  //upper limit factor used for sensor reading validation in mm
#define MEASURED_LOWER_LIMIT         1.90  //lower limit factor for sensor reading validation in mm
</span></code></pre>
</div>

<p>The range of your filament width. Set these according to your filament preferences. The sample values here apply to 3mm. For 1.75mm you’ll use a range more like 1.60 to 1.90.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define MAX_MEASUREMENT_DELAY       20
</span></code></pre>
</div>

<p>This defines the size of the buffer to allocate for use with <code class="highlighter-rouge">MEASUREMENT_DELAY_CM</code>. The value must be greater than or equal to <code class="highlighter-rouge">MEASUREMENT_DELAY_CM</code>. Keep this setting low to reduce RAM usage.</p>

<div class="language-cpp highlighter-rouge">
<pre class="highlight"><code><span class="cp">#define FILAMENT_LCD_DISPLAY
</span></code></pre>
</div>

<p>Periodically display a message on the LCD showing the measured filament diameter.</p>

            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- /content -->



    <!-- footer -->
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <hr>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-8">
            <p>Brought to you with <i class="fa fa-heart text-danger" aria-hidden="true"></i> lack of
              <i class="fa fa-bed" aria-hidden="true"></i> and lots of
              <i class="fa fa-coffee" aria-hidden="true"></i>. <br>
              The contents of this website are © 2016 under the terms of the <a href="http://www.gnu.org/licenses/gpl-3.0.txt">GPLv3</a> License.</p>
          </div>
          <div class="col-lg-4">
            <div class="pull-right">
              <a href="#top" data-proofer-ignore>
              Back to top <i class="fa fa-level-up" aria-hidden="true"></i></a>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <!-- /footer -->


    <!-- analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-76230130-1', {
          'cookieDomain': 'marlinfw.org',
          'siteSpeedSampleRate': 80
      });

      ga('require', 'displayfeatures');
      ga('send', 'pageview');
    </script>
    <!-- /analytics -->

  </body>
</html>
